{{ $show := default true (default .Site.Params.ShowTaxonomyTree .Params.ShowTaxonomyTree) }}
{{ if $show }}
  <menu class="sideblock">
    {{ $taxonomyTitles := .Site.Params.taxonomyTitles}}
    {{- range $taxonomyName, $taxonomy := .Site.Taxonomies }} 
      {{- $taxonomyTitle := index $taxonomyTitles $taxonomyName | default $taxonomyName }} 
      {{- with $taxonomy }}
        <li>
          <details class="menu-fold">
            <summary>
              <a href="/{{ $taxonomyName }}">{{ $taxonomyTitle }} </a> <sup>{{ len $taxonomy }}</sup>
            </summary>
            <menu class="indentline">
              {{- range $name, $value := $taxonomy }}
                {{- $count := $value.Count }}
                {{- $page := site.GetPage (printf "/%s/%s" $taxonomyName $name) }}
                  {{- with $page }}
                    <li><a href="{{ .Permalink }}">{{ .Name }}</a> <sup>{{ $count }}</sup></li>
                  {{- end }}
              {{- end }}
            </menu>
          </details>
        </li>
      {{- end }} 
    {{- end }}
  </menu>
{{- end}}
