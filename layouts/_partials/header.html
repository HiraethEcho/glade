<script>
  if (localStorage.getItem("pref-theme") === "dark") {
      document.body.classList.add('dark');
  } else if (localStorage.getItem("pref-theme") === "light") {
      document.body.classList.remove('dark')
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add('dark');
  }
</script>

<h1>
  <label for="nav-checkbox" id="nav-btn">â‰¡</label>
  <a href="{{ .Site.Home.RelPermalink }}">{{ site.Title }}</a>
</h1>
<input type="checkbox" id="menu-checkbox" style="display: none;">
<label for="menu-checkbox" id="menu-btn"><h1>âž¤</h1></label>
<menu>
  <li><button id="themetoggle">ðŸŒ“</button></li>
  {{- range site.Menus.main }}
    {{ partial "menu-button.html" . }}
  {{ end }}
</menu>

{{- define "_partials/menu-button.html" -}}
  {{ if .HasChildren }}
    <li>
      <input type="checkbox" id="menu-{{ .Identifier }}" style="display: none;">
      <label for="menu-{{ .Identifier }}">{{ .Name }}</label>
      <menu>
        {{ range .Children }}
          {{ partial "menu-button.html" . }}
        {{ end }}
      </menu>
    </li>
  {{ else }}
    <li><a href="{{.URL | relURL}}">{{ .Name }}</a></li>
  {{ end }}
{{end}}
