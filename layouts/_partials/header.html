<script>
  if (localStorage.getItem("pref-theme") === "dark") {
      document.body.classList.add('dark');
  } else if (localStorage.getItem("pref-theme") === "light") {
      document.body.classList.remove('dark')
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add('dark');
  }
</script>

<a href="{{ .Site.Home.RelPermalink }}"><h1>{{ site.Title }}</h1></a>
<input type="checkbox" id="menu-checkbox" style="display: none;">
<label for="menu-checkbox" id="menu-btn"><h1>Â«</h1></label>
<label for="nav-checkbox" id="nav-btn"><h1>â˜°</h1></label>
<menu><ul>
  <li><button id="themetoggle">ðŸŒ“</button></li>
  {{- range site.Menus.main }}
    {{ partial "menu-select.html" . }}
  {{ end }}
</ul></menu>


{{- define "_partials/menu-button.html" -}}
  {{ if .HasChildren }}
    <li>
      <label for="menu-{{ .Identifier }}">{{ .Name }}</label>
      <input type="checkbox" id="menu-{{ .Identifier }}" style="display: none;">
      <ul>
        {{ range .Children }}
          {{ partial "menu-button.html" . }}
        {{ end }}
      </ul>
    </li>
  {{ else }}
    <li><a href="{{.URL | relURL}}">{{ .Name }}</a></li>
  {{ end }}
{{end}}

{{- define "_partials/menu-select.html" -}}
  {{ if .HasChildren }}
    <li>
      <select onchange="location = this.value;">
        <option>{{ .Name }}</option>
        {{- range .Children }}
          <option value="{{ .URL | relURL }}">{{ .Name }}</option>
        {{- end }}
      </select>
    </li>
  {{ else }}
    <li><a href="{{.URL}}">{{ .Name }}</a></li>
  {{ end }}
{{end}}

{{- define "_partials/menu-details.html" -}}
  {{ if .HasChildren }}
    <li><details><summary>{{ .Name }}</summary>
      <ul>
        {{- range .Children }}
          {{- partial "menu-details.html" . }}
        {{- end }}
      </ul>
    </details></li>
  {{ else }}
    <li><a href="{{.URL}}">{{ .Name }}</a></li>
  {{ end }}
{{- end}}
