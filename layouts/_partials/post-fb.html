{{- $showf := default true (default .Site.Params.ShowForwardLinks .Params.ShowForwardLinks ) -}}
{{- $showb := default true (default .Site.Params.ShowBackLinks .Params.ShowBackLinks ) -}}
{{- if or $showf $showb -}}
  {{- $links := site.Home.Store.Get "crosslinks" | uniq }}
  {{- $forwardlinks := (where $links "sourceLink" .RelPermalink) }}
  {{- $backlinks := (where $links "targetLink" .RelPermalink) }}
  {{- if or $backlinks $forwardlinks -}}
    <div class="asideblock">
      {{- with $forwardlinks -}}
        <details open class="menu-fold">
          <summary>Forward Link</summary>
          <menu class="indentline">
            {{ range . }}
              <li>
                <a class="pagelink" href="{{- .targetLink -}}"
                  >{{- .targetTitle -}}</a
                >
              </li>
            {{- end -}}
          </menu>
        </details>
      {{- end -}}
      {{- with $backlinks -}}
        <details open class="menu-fold">
          <summary>Back Link</summary>
          <menu class="indentline">
            {{ range . }}
              <li>
                <a class="pagelink" href="{{- .sourceLink -}}"
                  >{{- .sourceTitle -}}</a
                >
              </li>
            {{- end -}}
          </menu>
        </details>
      {{- end -}}
    </div>
  {{- end -}}
{{- end -}}
